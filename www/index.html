<!DOCTYPE html>
<html>
  <head>
    <title>Capture Photo</title>
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1"/>
    <script src="phonegap.js"></script>
	<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script> 
   <script type="text/javascript" charset="utf-8">

      // Wait for PhoneGap to load
      document.addEventListener("deviceready", onDeviceReady, false);

      // PhoneGap is ready
      function onDeviceReady() {
          console.log("device ready");
          // Do cool things here...
      }

      function getImage() {
          // Retrieve image file location from specified source
          navigator.camera.getPicture(uploadPhoto, function(message) {
                      alert('get picture failed');
                  },{
                      quality: 50,
                      destinationType: navigator.camera.DestinationType.FILE_URI,
                      sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
                  }
          );

      }

      function uploadPhoto(imageURI) {
          var options = new FileUploadOptions();
          options.fileKey="image";
          options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
          options.mimeType="image/jpeg";
          var params = new Object();
          params.value1 = "test";
          params.value2 = "param";

          options.params = params;
          options.chunkedMode = false;

          var ft = new FileTransfer();
          ft.upload(imageURI, "http://issolutions/php/upload.php", win, fail, options);
      }

      function win(r) {
          console.log("Code = " + r.responseCode.toString()+"\n");
          console.log("Response = " + r.response.toString()+"\n");
          console.log("Sent = " + r.bytesSent.toString()+"\n");
          alert("Code Slayer!!!");
      }

      function fail(error) {
          alert("An error has occurred: Code = " + error.code);
      }

  </script>
  </head>
  <body>
	<div id="camera">
		<button class="camera-control" onclick="capturePhoto();">Foto </button>
		<button class="camera-control" onclick="getImage();">From Photo Library</button><br>
		<div style="text-align:center;margin:20px;">
			<img id="cameraPic" src="" style="display:none;width:auto;height:120px;"></img>
		</div>
		<button class="camera-control" onclick="uploadPhoto();">UPLOAD</button>
	</div>
  </body>
</html>
